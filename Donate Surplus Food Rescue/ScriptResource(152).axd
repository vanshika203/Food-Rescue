// (c) 2010 CodePlex Foundation
Type.registerNamespace("Sys.Extended.UI.Seadragon");Sys.Extended.UI.Seadragon.TileSource=function(n,t,i,r,u,f){this.aspectRatio=n/t;this.dimensions=new Sys.Extended.UI.Seadragon.Point(n,t);this.minLevel=u?u:0;this.maxLevel=f?f:Math.ceil(Math.log(Math.max(n,t))/Math.log(2));this.tileSize=i?i:0;this.tileOverlap=r?r:0};Sys.Extended.UI.Seadragon.TileSource.prototype={getLevelScale:function(n){return 1/(1<<this.maxLevel-n)},getNumTiles:function(n){var t=this.getLevelScale(n),i=Math.ceil(t*this.dimensions.x/this.tileSize),r=Math.ceil(t*this.dimensions.y/this.tileSize);return new Sys.Extended.UI.Seadragon.Point(i,r)},getPixelRatio:function(n){var t=this.dimensions.times(this.getLevelScale(n)),i=1/t.x,r=1/t.y;return new Sys.Extended.UI.Seadragon.Point(i,r)},getTileAtPoint:function(n,t){var i=t.times(this.dimensions.x).times(this.getLevelScale(n)),r=Math.floor(i.x/this.tileSize),u=Math.floor(i.y/this.tileSize);return new Sys.Extended.UI.Seadragon.Point(r,u)},getTileBounds:function(n,t,i){var u=this.dimensions.times(this.getLevelScale(n)),o=t===0?0:this.tileSize*t-this.tileOverlap,s=i===0?0:this.tileSize*i-this.tileOverlap,f=this.tileSize+(t===0?1:2)*this.tileOverlap,e=this.tileSize+(i===0?1:2)*this.tileOverlap,r;return f=Math.min(f,u.x-o),e=Math.min(e,u.y-s),r=1/u.x,new Sys.Extended.UI.Seadragon.Rect(o*r,s*r,f*r,e*r)},getTileUrl:function(){throw new Error("Method not implemented.");},tileExists:function(n,t,i){var r=this.getNumTiles(n);return n>=this.minLevel&&n<=this.maxLevel&&t>=0&&i>=0&&t<r.x&&i<r.y}};Sys.Extended.UI.Seadragon.TileSource.registerClass("Sys.Extended.UI.Seadragon.TileSource",null,Sys.IDisposable);