// (c) 2010 CodePlex Foundation
(function(){function n(){Type.registerNamespace("Sys.Extended.UI");Sys.Extended.UI.HorizontalSide=function(){throw Error.invalidOperation();};Sys.Extended.UI.HorizontalSide.prototype={Left:0,Center:1,Right:2};Sys.Extended.UI.HorizontalSide.registerEnum("Sys.Extended.UI.HorizontalSide",!1);Sys.Extended.UI.VerticalSide=function(){throw Error.invalidOperation();};Sys.Extended.UI.VerticalSide.prototype={Top:0,Middle:1,Bottom:2};Sys.Extended.UI.VerticalSide.registerEnum("Sys.Extended.UI.VerticalSide",!1);Sys.Extended.UI.AlwaysVisibleControlBehavior=function(n){Sys.Extended.UI.AlwaysVisibleControlBehavior.initializeBase(this,[n]);this._horizontalOffset=0;this._horizontalSide=Sys.Extended.UI.HorizontalSide.Left;this._verticalOffset=0;this._verticalSide=Sys.Extended.UI.VerticalSide.Top;this._scrollEffectDuration=.1;this._repositionHandler=null;this._animate=!1;this._animation=null};Sys.Extended.UI.AlwaysVisibleControlBehavior.prototype={initialize:function(){Sys.Extended.UI.AlwaysVisibleControlBehavior.callBaseMethod(this,"initialize");var n=this.get_element();if(!n)throw Error.invalidOperation(Sys.Extended.UI.Resources.AlwaysVisible_ElementRequired);this._repositionHandler=Function.createDelegate(this,this._reposition);Sys.Browser.agent==Sys.Browser.InternetExplorer&&Sys.Browser.version<7&&(this._animate=!0);this._animate?(this._animation=new Sys.Extended.UI.Animation.MoveAnimation(n,this._scrollEffectDuration,25,0,0,!1,"px"),n.style.position="absolute"):n.style.position="fixed";$addHandler(window,"resize",this._repositionHandler);this._animate&&$addHandler(window,"scroll",this._repositionHandler);this._reposition()},dispose:function(){this._repositionHandler&&(this._animate&&$removeHandler(window,"scroll",this._repositionHandler),$removeHandler(window,"resize",this._repositionHandler),this._repositionHandler=null);this._animation&&(this._animation.dispose(),this._animation=null);Sys.Extended.UI.AlwaysVisibleControlBehavior.callBaseMethod(this,"dispose")},_reposition:function(){var i=this.get_element(),n,t;if(i){this.raiseRepositioning(Sys.EventArgs.Empty);n=0;t=0;this._animate&&(document.documentElement&&document.documentElement.scrollTop?(n=document.documentElement.scrollLeft,t=document.documentElement.scrollTop):(n=document.body.scrollLeft,t=document.body.scrollTop));var r=$common.getClientBounds(),u=r.width,f=r.height;switch(this._horizontalSide){case Sys.Extended.UI.HorizontalSide.Center:n=Math.max(0,Math.floor(n+u/2-i.offsetWidth/2-this._horizontalOffset));break;case Sys.Extended.UI.HorizontalSide.Right:n=Math.max(0,n+u-i.offsetWidth-this._horizontalOffset);break;case Sys.Extended.UI.HorizontalSide.Left:default:n+=this._horizontalOffset}switch(this._verticalSide){case Sys.Extended.UI.VerticalSide.Middle:t=Math.max(0,Math.floor(t+f/2-i.offsetHeight/2-this._verticalOffset));break;case Sys.Extended.UI.VerticalSide.Bottom:t=Math.max(0,t+f-i.offsetHeight-this._verticalOffset);break;case Sys.Extended.UI.VerticalSide.Top:default:t+=this._verticalOffset}this._animate&&this._animation?(this._animation.stop(),this._animation.set_horizontal(n),this._animation.set_vertical(t),this._animation.play()):(i.style.left=n+"px",i.style.top=t+"px");this.raiseRepositioned(Sys.EventArgs.Empty)}},get_HorizontalOffset:function(){return this._horizontalOffset},set_HorizontalOffset:function(n){this._horizontalOffset!=n&&(this._horizontalOffset=n,this._reposition(),this.raisePropertyChanged("HorizontalOffset"))},get_HorizontalSide:function(){return this._horizontalSide},set_HorizontalSide:function(n){this._horizontalSide!=n&&(this._horizontalSide=n,this._reposition(),this.raisePropertyChanged("HorizontalSide"))},get_VerticalOffset:function(){return this._verticalOffset},set_VerticalOffset:function(n){this._verticalOffset!=n&&(this._verticalOffset=n,this._reposition(),this.raisePropertyChanged("VerticalOffset"))},get_VerticalSide:function(){return this._verticalSide},set_VerticalSide:function(n){this._verticalSide!=n&&(this._verticalSide=n,this._reposition(),this.raisePropertyChanged("VerticalSide"))},get_ScrollEffectDuration:function(){return this._scrollEffectDuration},set_ScrollEffectDuration:function(n){this._scrollEffectDuration!=n&&(this._scrollEffectDuration=n,this._animation&&this._animation.set_duration(n),this.raisePropertyChanged("ScrollEffectDuration"))},get_useAnimation:function(){return this._animate},set_useAnimation:function(n){n|=Sys.Browser.agent==Sys.Browser.InternetExplorer&&Sys.Browser.version<7;this._animate!=n&&(this._animate=n,this.raisePropertyChanged("useAnimation"))},add_repositioning:function(n){this.get_events().addHandler("repositioning",n)},remove_repositioning:function(n){this.get_events().removeHandler("repositioning",n)},raiseRepositioning:function(n){var t=this.get_events().getHandler("repositioning");t&&t(this,n)},add_repositioned:function(n){this.get_events().addHandler("repositioned",n)},remove_repositioned:function(n){this.get_events().removeHandler("repositioned",n)},raiseRepositioned:function(n){var t=this.get_events().getHandler("repositioned");t&&t(this,n)}};Sys.Extended.UI.AlwaysVisibleControlBehavior.registerClass("Sys.Extended.UI.AlwaysVisibleControlBehavior",Sys.Extended.UI.BehaviorBase);Sys.registerComponent(Sys.Extended.UI.AlwaysVisibleControlBehavior,{name:"alwaysVisible"})}window.Sys&&Sys.loader?Sys.loader.registerScript("ExtendedAlwaysVisible",["ExtendedAnimations","ExtendedBase"],n):n()})();