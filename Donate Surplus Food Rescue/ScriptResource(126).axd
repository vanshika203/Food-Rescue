// (c) 2010 CodePlex Foundation
(function(){function n(){Type.registerNamespace("Sys.Extended.UI");Sys.Extended.UI.HtmlEditorExtenderBehavior=function(n){Sys.Extended.UI.HtmlEditorExtenderBehavior.initializeBase(this,[n]);this._textbox=Sys.Extended.UI.TextBoxWrapper.get_Wrapper(n);var t=this.get_id();this._backColor=null;this._foreColor=null;this._commandName=null;this._savedRange=null;this._isInFocus=null;this._oldContents=null;this._newContents=null;this._isDirty=!1;this._viewMode="content";this._displaySourceTab=!1;this._ButtonWidth=23;this._ButtonHeight=21;this._containerTemplate={nodeName:"div",properties:{id:t+"_ExtenderContainer"},cssClasses:["unselectable","ajax__html_editor_extender_container"]};this._editableTemplate={nodeName:"div",properties:{id:t+"_ExtenderContentEditable",style:{overflow:"auto",clear:"both"},contentEditable:!0},cssClasses:["ajax__html_editor_extender_texteditor"]};this._sourceViewTemplate={nodeName:"div",properties:{id:t+"_ExtenderSourceView",style:{height:"90%",overflow:"auto",clear:"both"},contentEditable:!0},cssClasses:["ajax__html_editor_extender_texteditor"]};this._buttonTemplate={nodeName:"input",properties:{type:"button",style:{width:this._ButtonWidth+"px",height:this._ButtonHeight+"px"}},cssClasses:["ajax__html_editor_extender_button"]};this._buttonContentTemplate={nodeName:"input",properties:{type:"button",style:{width:this._ButtonWidth+"px",height:this._ButtonHeight+"px"}},cssClasses:["ajax__html_editor_extender_button ajax__html_editor_extender_content"]};this._buttonSourceTemplate={nodeName:"input",properties:{type:"button",style:{width:this._ButtonWidth+"px",height:this._ButtonHeight+"px"}},cssClasses:["ajax__html_editor_extender_button ajax__html_editor_extender_source"]};this._textboxTemplate={nodeName:"input",properties:{type:"text"}};this._dropDownTemplate={nodeName:"select",properties:{style:{width:this._ButtonWidth+"px",height:this._ButtonHeight+"px"}},cssClasses:["ajax__html_editor_extender_button"]};this._topButtonContainerTemplate={nodeName:"div",properties:{id:t+"_ExtenderButtonContainer"},cssClasses:["ajax__html_editor_extender_buttoncontainer"]};this._topButtonContainerTemplate2={nodeName:"div",properties:{id:t+"_ExtenderButtonContainer2",style:{clear:"both"}},cssClasses:["ajax__html_editor_extender_buttoncontainer2"]};this._container=null;this._toolbarButtons=null;this._editableDiv=null;this._sourceViewDiv=null;this._topButtonContainer=null;this._topButtonContainer2=null;this._buttons=[];this._btnClickHandler=null;this._requested_buttons=[];this._colorPicker=null;this._txtBoxForColor=null;this._contentViewButton=null;this._sourceViewButton=null;this._popupDiv=null;this._btnDone=null;this._btnCancel=null;this._isFocusInEditableDiv=!1;this._textBoxOnBlurDelegate=null;this._editableDivOnBlurDelegate=null;this._editableDivOnFocusDelegate=null;this._btnClickDelegate=null;this._contentViewClickDelegate=null;this._sourceViewClickDelegate=null;this._sourceViewDivOnBlurDelegate=null;this._imageCancelClickDelegate=null;typeof WebForm_OnSubmit!="function"||Sys.Extended.UI.HtmlEditorExtenderBehavior._originalWebForm_OnSubmit||(Sys.Extended.UI.HtmlEditorExtenderBehavior._originalWebForm_OnSubmit=WebForm_OnSubmit,WebForm_OnSubmit=Sys.Extended.UI.HtmlEditorExtenderBehavior.WebForm_OnSubmit)};Sys.Extended.UI.HtmlEditorExtenderBehavior.prototype={initialize:function(){var i,t;for(Sys.Extended.UI.HtmlEditorExtenderBehavior.callBaseMethod(this,"initialize"),n[n.length]=this,this._button_list=[],this._createContainer(),this._createTopButtonContainer(),this._createButton(),this._createEditableDiv(),this.get_displaySourceTab()&&(this._createSourceViewDiv(),this._createTopButtonContainer2()),i=this._textbox._element.parentNode;i!=null&&i.nodeName!="FORM";)i=i.parentNode;if(i==null)throw"Missing Form tag";t=this.get_id();this._popupDiv=$get(t+"_popupDiv");this._popupDiv==null&&(t=t.indexOf("_")!=-1?t.substring(t.lastIndexOf("_")+1):"",this._popupDiv=$get(t+"_popupDiv"));this._popupDiv!=null&&(this._popupBehavior=$create(Sys.Extended.UI.PopupBehavior,{id:t+"_ImagePopupBehavior",parentElement:this.get_element(),unselectable:"on"},null,null,this._popupDiv),this._btnCancel=$get(t+"_btnCancel"),this._imageCancelClickDelegate=Function.createDelegate(this,this._btnCancel_click),$addHandler(this._btnCancel,"click",this._imageCancelClickDelegate,!0),this._elementVisible(this._popupDiv,!1));this._textBoxOnBlurDelegate=Function.createDelegate(this,this._textBox_onblur);this._editableDivOnBlurDelegate=Function.createDelegate(this,this._editableDiv_onblur);this._editableDivOnFocusDelegate=Function.createDelegate(this,this._editableDiv_onfocus);this._btnClickDelegate=Function.createDelegate(this,this._executeCommand);this.get_displaySourceTab()&&(this._contentViewClickDelegate=Function.createDelegate(this,this._contentView_click),this._sourceViewClickDelegate=Function.createDelegate(this,this._sourceView_click),this._sourceViewDivOnBlurDelegate=Function.createDelegate(this,this._sourceViewDiv_onblur));$addHandler(this._textbox._element,"blur",this._textBoxOnBlurDelegate,!0);$addHandler(this._editableDiv,"blur",this._editableDivOnBlurDelegate,!0);$addHandler(this._editableDiv,"focus",this._editableDivOnFocusDelegate,!0);$addHandler(this._topButtonContainer,"click",this._btnClickDelegate,!0);this.get_displaySourceTab()&&($addHandler(this._contentViewButton,"click",this._contentViewClickDelegate,!0),$addHandler(this._sourceViewButton,"click",this._sourceViewClickDelegate,!0),$addHandler(this._sourceViewDiv,"blur",this._sourceViewDivOnBlurDelegate,!0))},_dispose:function(){$removeHandler(this._textbox._element,"blur",this._textBoxOnBlurDelegate);$removeHandler(this._editableDiv,"blur",this._editableDivOnBlurDelegate);$removeHandler(this._editableDiv,"focus",this._editableDivOnFocusDelegate);$removeHandler(this._topButtonContainer,"click",this._btnClickDelegate);this.get_displaySourceTab()&&($removeHandler(this._contentViewButton,"click",this._contentViewClickDelegate),$removeHandler(this._sourceViewButton,"click",this._sourceViewClickDelegate),$removeHandler(this._sourceViewDiv,"blur",this._sourceViewDivOnBlurDelegate));this._popupDiv!=null&&$removeHandler(this._btnCancel,"click",this._imageCancelClickDelegate);Sys.Extended.UI.HtmlEditorExtenderBehavior.callBaseMethod(this,"dispose")},_createContainer:function(){var t=this.get_element(),n;this._container=$common.createElementFromTemplate(this._containerTemplate,t.parentNode);this._elementVisible(this._textbox._element,!0);n=$common.getBounds(this._textbox._element);$common.setSize(this._container,{width:n.width,height:n.height});this._elementVisible(this._textbox._element,!1);$common.wrapElement(this._textbox._element,this._container,this._container)},_createTopButtonContainer:function(){this._topButtonContainer=$common.createElementFromTemplate(this._topButtonContainerTemplate,this._container)},_createButton:function(){var f=Sys.Browser.agent==Sys.Browser.InternetExplorer,n,r,t,u;for(i=0;i<this._toolbarButtons.length;i++)if(this._toolbarButtons[i].CommandName=="HorizontalSeparator")n=$common.createElementFromTemplate({nodeName:"span",cssClasses:["ajax__html_editor_extender_separator"]},this._topButtonContainer);else if(this._toolbarButtons[i].CommandName=="FontName"){n=$common.createElementFromTemplate({nodeName:"nobr",properties:{style:{float:"left",cssFloat:"left",fontSize:"11px"}},cssClasses:["fontnameclass"],children:[{nodeName:"span",properties:{textContent:"Font ",innerText:"Font ",style:{paddingLeft:"5px",fontWeight:"bold"}}}]},this._topButtonContainer);_select=$common.createElementFromTemplate({nodeName:"select",properties:{style:{fontSize:"9px",fontFamily:"Arial",height:"20px",width:"90px"}},events:{change:function(){var n=this.options[this.selectedIndex].value;setTimeout(function(){document.execCommand("fontname",!1,n)},200)}}},n);r=[{Text:"Arial",Value:"arial,helvetica,sans-serif"},{Text:"Courier New",Value:"courier new,courier,monospace"},{Text:"Georgia",Value:"georgia,times new roman,times,serif"},{Text:"Tahoma",Value:"tahoma,arial,helvetica,sans-serif"},{Text:"Times New Roman",Value:"times new roman,times,serif"},{Text:"Verdana",Value:"verdana,arial,helvetica,sans-serif"},{Text:"Impact",Value:"impact"},{Text:"WingDings",Value:"wingdings"}];for(x in r){t=document.createElement("option");t.text=r[x].Text;t.value=r[x].Value;try{_select.add(t,null)}catch(e){_select.add(t)}}_select.setAttribute("id",this._id+this._toolbarButtons[i].CommandName);_select.setAttribute("name",this._toolbarButtons[i].CommandName);_select.setAttribute("title",this._toolbarButtons[i].Tooltip);_select.setAttribute("unselectable","on")}else if(this._toolbarButtons[i].CommandName=="FontSize"){n=$common.createElementFromTemplate({nodeName:"nobr",properties:{style:{float:"left",cssFloat:"left",fontSize:"11px"}},cssClasses:["fontsizeclass"],children:[{nodeName:"span",properties:{textContent:"Size ",innerText:"Size ",style:{paddingLeft:"5px",fontWeight:"bold"}}}]},this._topButtonContainer);_select=$common.createElementFromTemplate({nodeName:"select",properties:{style:{fontSize:"11px",fontFamily:"Arial",height:"20px",width:f?"30px":"50px"}},events:{change:function(){var n=this.options[this.selectedIndex].value;setTimeout(function(){document.execCommand("fontsize",!1,n)},200)}}},n);r=[{Text:"1",Value:"1"},{Text:"2",Value:"2"},{Text:"3",Value:"3"},{Text:"4",Value:"4"},{Text:"5",Value:"5"},{Text:"6",Value:"6"},{Text:"7",Value:"7"}];for(x in r){t=document.createElement("option");t.text=r[x].Text;t.value=r[x].Value;try{_select.add(t,null)}catch(e){_select.add(t)}}_select.setAttribute("id",this._id+this._toolbarButtons[i].CommandName);_select.setAttribute("name",this._toolbarButtons[i].CommandName);_select.setAttribute("title",this._toolbarButtons[i].Tooltip);_select.setAttribute("unselectable","on")}else this._toolbarButtons[i].CommandName=="ForeColor"?(n=$common.createElementFromTemplate({nodeName:"span",properties:{style:{backgroundColor:"#ff0000",border:"solid 1px #c2c2c2",display:"block",float:"left",cssFloat:"left"}},cssClasses:["forecolorclass"]},this._topButtonContainer),n.setAttribute("unselectable","on"),this._foreColor=$common.createElementFromTemplate({nodeName:"input",properties:{type:"button",id:this._id+this._toolbarButtons[i].CommandName,name:this._toolbarButtons[i].CommandName,title:this._toolbarButtons[i].Tooltip,style:{backgroundColor:"transparent",width:"21px",height:"19px",color:"transparent"}},cssClasses:["ajax__html_editor_extender_button ajax__html_editor_extender_"+this._toolbarButtons[i].CommandName]},n),this._foreColor.setAttribute("unselectable","on")):this._toolbarButtons[i].CommandName=="BackColor"?(n=$common.createElementFromTemplate({nodeName:"span",properties:{style:{backgroundColor:"#ff0000",border:"solid 1px #c2c2c2",display:"block",float:"left",cssFloat:"left"}},cssClasses:["backcolorclass"]},this._topButtonContainer),n.setAttribute("unselectable","on"),this._backColor=$common.createElementFromTemplate({nodeName:"input",properties:{type:"button",id:this._id+this._toolbarButtons[i].CommandName,name:this._toolbarButtons[i].CommandName,title:this._toolbarButtons[i].Tooltip,style:{backgroundColor:"transparent",width:"21px",height:"19px",color:"transparent"}},cssClasses:["ajax__html_editor_extender_button ajax__html_editor_extender_"+this._toolbarButtons[i].CommandName]},n),this._backColor.setAttribute("unselectable","on")):(u={Copy:1,Cut:1,Paste:1},Sys.Browser.agent!=Sys.Browser.InternetExplorer&&u[this._toolbarButtons[i].CommandName]||(n=$common.createElementFromTemplate({nodeName:"input",properties:{type:"button",id:this._id+this._toolbarButtons[i].CommandName,name:this._toolbarButtons[i].CommandName,title:this._toolbarButtons[i].Tooltip,style:{width:"23px",height:"21px"}},cssClasses:["ajax__html_editor_extender_button ajax__html_editor_extender_"+this._toolbarButtons[i].CommandName]},this._topButtonContainer),n.setAttribute("unselectable","on")),Array.add(this._buttons,n))},_createEditableDiv:function(){var t=this.get_id(),n;this._elementVisible(this._container,!0);n=this.get_displaySourceTab()?this._container.clientHeight-(this._topButtonContainer.clientHeight+25):this._container.clientHeight-this._topButtonContainer.clientHeight;this._elementVisible(this._container,!1);this._editableDiv=$common.createElementFromTemplate({nodeName:"div",properties:{id:t+"_ExtenderContentEditable",style:{height:n+"px",overflow:"auto",clear:"both"},contentEditable:!0},cssClasses:["ajax__html_editor_extender_texteditor"]},this._container);this._textbox._element.value=this._textbox._element.value.replace("&#x26;amp&#x3B;","&#x26;");this._editableDiv.innerHTML=this._textbox._element.value;this._oldContents=this._editableDiv.innerHTML;$common.setVisible(this._textbox._element,!1)},_createTopButtonContainer2:function(){this._topButtonContainer2=$common.createElementFromTemplate(this._topButtonContainerTemplate2,this._container);this._contentViewButton=$common.createElementFromTemplate(this._buttonContentTemplate,this._topButtonContainer2);this._sourceViewButton=$common.createElementFromTemplate(this._buttonSourceTemplate,this._topButtonContainer2)},_createSourceViewDiv:function(){var n=this.get_id(),t=this._container.clientHeight-25;this._sourceViewDiv=$common.createElementFromTemplate({nodeName:"div",properties:{id:n+"_ExtenderSourceView",style:{height:t+"px",overflow:"auto",clear:"both"},contentEditable:!0},cssClasses:["ajax__html_editor_extender_texteditor"]},this._container);$common.setVisible(this._sourceViewDiv,!1)},_editableDiv_onblur:function(){this._textbox._element.value=this._encodeHtml();this._isFocusInEditableDiv=!1;this._oldContents!=this._editableDiv.innerHTML&&(this._isDirty=!0,this._oldContents=this._editableDiv.innerHTML,this._raiseEvent("change"))},_editableDiv_onfocus:function(){this._isFocusInEditableDiv=!1},_sourceViewDiv_onblur:function(){this._oldContents!=(this._sourceViewDiv.innerText||this._sourceViewDiv.textContent)&&(this._isDirty=!0,this._editableDiv.innerHTML=this._sourceViewDiv.textContent!=undefined?this._sourceViewDiv.textContent:this._sourceViewDiv.innerText,this._oldContents=this._editableDiv.innerHTML,this._raiseEvent("change"))},_textBox_onblur:function(){this._editableDiv.innerHTML=this._textbox._element.value},_contentView_click:function(){this._viewMode!="content"&&($common.setVisible(this._topButtonContainer,!0),$common.setVisible(this._editableDiv,!0),this._editableDiv.innerHTML=this._sourceViewDiv.textContent!=undefined?this._sourceViewDiv.textContent:this._sourceViewDiv.innerText,this._oldContents=this._editableDiv.innerHTML,$common.setVisible(this._sourceViewDiv,!1),this._viewMode="content")},_sourceView_click:function(){this._viewMode!="source"&&($common.setVisible(this._sourceViewDiv,!0),this._sourceViewDiv.textContent!=undefined?this._sourceViewDiv.textContent=this._editableDiv.innerHTML:this._sourceViewDiv.innerText=this._editableDiv.innerHTML,this._oldContents=this._editableDiv.innerHTML,$common.setVisible(this._editableDiv,!1),$common.setVisible(this._topButtonContainer,!1),this._viewMode="source")},_btnCancel_click:function(){this._popupBehavior.hide()},_attributes:{style:"st_yle_",size:"si_ze_",color:"co_lor_",face:"fa_ce_",align:"al_ign_"},_rgbToHex:function(n){var t=/rgb\s?\(\s?(\d+)\s?,\s?(\d+)\s?,\s?(\d+)\s?\)/.exec(n);return"#"+(parseInt(t[3],10)|parseInt(t[2],10)<<8|parseInt(t[1],10)<<16).toString(16)},_encodeHtml:function(){for(var u=Sys.Browser.agent==Sys.Browser.InternetExplorer,o=this._editableDiv.getElementsByTagName("*"),t,n,f,e,r,i=0;t=o[i];i++){try{t.className="";t.removeAttribute("class")}catch(s){}try{t.id="";t.removeAttribute("id")}catch(s){}try{t.removeAttribute("width")}catch(s){}u}return n=this._editableDiv.innerHTML,u&&(f=/\<[^\>]+\>/g,n=n.replace(f,function(n){var t="",i="";return n.toLowerCase().substring(0,2)!="<a"?(t=/\=\'([^\'])*\'/g,i=/\=([^\"][^\s\/\>]*)/g,n.replace(t,'="$1"').replace(i,"=$1")):n})),e=this._rgbToHex,r=function(){n=n.replace(/(\<[^\>]+)(rgb\s?\(\d{1,3}\s?\,\s?\d{1,3}\s?\,\s?\d{1,3}\s?\))([^\>]*\>)/gi,function(n,t,i,r){return(t||"")+(i&&e(i)||"")+(r||"")})},r(),r(),n=n.replace(/\sclass\=\"\"/gi,"").replace(/\sid\=\"\"/gi,""),n=n.replace(/\<(\/?)strong\>/gi,"<$1b>").replace(/\<(\/?)em\>/gi,"<$1i>"),n=n.replace(/&/ig,"&amp;").replace(/\xA0/ig,"&nbsp;"),n=n.replace(/</ig,"&lt;").replace(/>/ig,"&gt;").replace(/\'/ig,"&apos;").replace(/\"/ig,"&quot;")},_editableDiv_submit:function(){var t=3,n=null;setTimeout(function(){this._editableDiv!=null&&this._editableDiv.focus()},0);Sys.Browser.agent!=Sys.Browser.Firefox&&(document.selection?(n=document.selection.createRange(),n.moveStart("character",t),n.select()):(n=window.getSelection(),n.collapse(this._editableDiv.firstChild,t)));this._textbox._element.value=this._encodeHtml()},_executeCommand:function(n){var u,f,c,t,o,v,s,r,h;if(n.target.name!=undefined)if(u=Sys.Browser.agent==Sys.Browser.Firefox,f=Function.createDelegate(this,this._colorPicker_onchange),u&&document.execCommand("styleWithCSS",!1,!1),c={JustifyRight:1,JustifyLeft:1,JustifyCenter:1,JustifyFull:1,Indent:1,Outdent:1},c[n.target.name])try{document.execCommand(n.target.name,!1,null)}catch(e){if(e&&e.result==2147500037){var l=window.getSelection().getRangeAt(0),i=document.createElement("div"),a=!1;for(i.style.height="1px;",l.startContainer.contentEditable=="true"&&(window.getSelection().collapseToEnd(),a=!0),t=window.getSelection().getRangeAt(0).startContainer;t&&t.contentEditable!="true";)t=t.parentNode;if(!t)throw"Selected node is not editable!";t.insertBefore(i,t.childNodes[0]);document.execCommand(n.target.name,!1,null);i.parentNode.removeChild(i);a&&window.getSelection().addRange(l)}else window.console&&window.console.log&&window.console.log(e)}else if(n.target.name=="createLink")o=prompt("Please insert  URL",""),o&&document.execCommand("createLink",!1,o);else if(n.target.name=="ForeColor")this._commandName=n.target.name,this.saveSelection(),this._foreColorPicker||(this._foreColorPicker=$create(Sys.Extended.UI.ColorPickerBehavior,{unselectable:"on"},{},{},this._foreColor),this._foreColorPicker.set_sample(this._foreColor.parentNode),this._foreColorPicker.add_colorSelectionChanged(f)),this._foreColorPicker.show();else if(n.target.name=="BackColor")this._commandName=n.target.name,this.saveSelection(),this._backColorPicker||(this._backColorPicker=$create(Sys.Extended.UI.ColorPickerBehavior,{unselectable:"on"},{},{},this._backColor),this._backColorPicker.set_sample(this._backColor.parentNode),this._backColorPicker.add_colorSelectionChanged(f)),this._backColorPicker.show();else if(n.target.name=="UnSelect")u?(this._editableDiv.focus(),v=window.getSelection(),v.collapse(this._editableDiv.firstChild,0)):document.execCommand(n.target.name,!1,null);else if(n.target.name=="InsertImage"){for(this._isFocusInEditableDiv||this._editableDiv.focus(),this.saveSelection(),s=Sys.Application.getComponents(),r=0;r<s.length;r++)if(h=s[r],Sys.Extended.UI.HtmlEditorExtenderBehavior.isInstanceOfType(h)&&h._popupBehavior._visible)return;this._elementVisible(this._popupDiv,!0);this._popupBehavior.show();$common.setStyle(this._popupDiv,{position:"fixed",top:"",left:"",opacity:"1"})}else document.execCommand(n.target.name,!1,null)},_colorPicker_onchange:function(n){if(this.restoreSelection(),/backcolor/i.test(this._commandName)){var t=Sys.Browser.agent==Sys.Browser.Firefox;t?(document.execCommand("stylewithcss",!1,!0),document.execCommand("hilitecolor",!1,"#"+n._selectedColor),document.execCommand("stylewithcss",!1,!1)):document.execCommand("backcolor",!1,"#"+n._selectedColor)}else document.execCommand(this._commandName,!1,"#"+n._selectedColor)},saveSelection:function(){window.getSelection?this._savedRange=window.getSelection().getRangeAt(0):document.selection&&(this._savedRange=document.selection.createRange())},restoreSelection:function(){if(this._isInFocus=!0,this._savedRange!=null)if(window.getSelection){var n=window.getSelection();n.rangeCount>0&&n.removeAllRanges();n.addRange(this._savedRange)}else document.createRange?window.getSelection().addRange(this._savedRange):document.selection&&this._savedRange.select()},_elementVisible:function(n,t){n.tagName!="FORM"&&(t?(n.style.display=="none"&&(n.style.display="block",n.setAttribute("displayChanged",!0)),n.style.visibility=="hidden"&&(n.style.visibility="visible",n.setAttribute("visibleChanged",!0)),this._elementVisible(n.parentNode,!0)):(n.getAttribute("displayChanged")&&(n.style.display="none",n.removeAttribute("displayChanged")),n.getAttribute("visibleChanged")&&n.removeAttribute("visibleChanged"),this._elementVisible(n.parentNode,!1)))},_raiseEvent:function(n,t){var i=this.get_events().getHandler(n);i&&(t||(t=Sys.EventArgs.Empty),i(this,t))},get_ButtonWidth:function(){return this._ButtonWidth},set_ButtonWidth:function(n){this._ButtonWidth!=n&&(this._ButtonWidth=n,this.raisePropertyChanged("ButtonWidth"))},get_ButtonHeight:function(){return this._ButtonHeight},set_ButtonHeight:function(n){this._ButtonHeight!=n&&(this._ButtonHeight=n,this.raisePropertyChanged("ButtonHeight"))},get_ToolbarButtons:function(){return this._toolbarButtons},set_ToolbarButtons:function(n){this._toolbarButtons!=n&&(this._toolbarButtons=n,this.raisePropertyChanged("ToolbarButtons"))},get_displaySourceTab:function(){return this._displaySourceTab},set_displaySourceTab:function(n){this._displaySourceTab!=n&&(this._displaySourceTab=n,this.raisePropertyChanged("DisplaySourceTab"))},add_change:function(n){this.get_events().addHandler("change",n)},remove_change:function(n){this.get_events().removeHandler("change",n)},get_isDirty:function(){return this._isDirty}};Sys.Extended.UI.HtmlEditorExtenderBehavior.registerClass("Sys.Extended.UI.HtmlEditorExtenderBehavior",Sys.Extended.UI.BehaviorBase);Sys.registerComponent(Sys.Extended.UI.HtmlEditorExtenderBehavior,{name:"HtmlEditorExtender",parameters:[{name:"ToolbarButtons",type:"HtmlEditorExtenderButton[]"}]});var n=[];Sys.Extended.UI.HtmlEditorExtenderBehavior.WebForm_OnSubmit=function(){var r=Sys.Extended.UI.HtmlEditorExtenderBehavior._originalWebForm_OnSubmit(),t,n,i;if(r)for(t=Sys.Application.getComponents(),n=0;n<t.length;n++)i=t[n],Sys.Extended.UI.HtmlEditorExtenderBehavior.isInstanceOfType(i)&&i._editableDiv_submit();return r};Sys.Extended.UI.HtmlEditorExtenderBehavior.IsDirty=function(){for(var i=Sys.Application.getComponents(),t,n=0;n<i.length;n++)if(t=i[n],Sys.Extended.UI.HtmlEditorExtenderBehavior.isInstanceOfType(t)&&t._isDirty)return!0;return!1};ajaxClientUploadComplete=function(n,t){for(var i=null,o=Sys.Application.getComponents(),f,e,r,u=0;u<o.length;u++)f=o[u],Sys.Extended.UI.HtmlEditorExtenderBehavior.isInstanceOfType(f)&&f._popupBehavior._visible&&(i=f,u=f.length);if(e=t.get_postedUrl().replace("&amp;","&"),i!=null){if(i.restoreSelection(),document.selection&&document.selection.createRange)try{i._savedRange.pasteHTML("<img src='"+e+"' />")}catch(s){r=document.createElement("img");r.src=e;i._savedRange.insertNode(r)}else r=document.createElement("img"),r.src=e,i._savedRange.insertNode(r);if(n._filesInQueue.length==n._currentQueueIndex+1){while(n._filesInQueue.length>=1)n._filesInQueue[0].removeNodeFrom(n._queueContainer),Array.removeAt(n._filesInQueue,0);n._showFilesCount();n._reset();i._popupBehavior.hide()}}}}window.Sys&&Sys.loader?Sys.loader.registerScript("HtmlEditorExtenderBehavior",["ExtendedBase","ExtendedCommon"],n):n()})();