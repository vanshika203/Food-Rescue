// (c) 2010 CodePlex Foundation
(function(n,t){$act.createWidget("tabPanel",t.Widget,{options:{enabled:!0,scrollBars:"None",dynamicServicePath:null,dynamicServiceMethod:null,dynamicContextKey:null,onDemandMode:"Always",updatePanelID:null,wasLoadedOnce:!1,owner:null},_events:["click","populating","populated"],_create:function(){var n=this,i=n.options,r=n.element.attr("id");n._active=!1;n._tab=t("#"+r+"_tab");n._header=t("#__tab_"+r);n._tabIndex=i.owner.get_tabs().length;i.enabled?n._addHandlersOnEnabled():n._makeEnabled(!1);i.onClientClick&&n.add_click(i.onClientClick)},_setOption:function(n,t){var i=this;switch(n){case"enabled":i._makeEnabled(t);break;case"disabled":i._makeEnabled(!t);break;case"headerText":i._header.text(t)}i._superApply(arguments)},_set_active:function(n){this._active=n;n?this._activate():this._deactivate()},_activate:function(){var n=this,u=n.options,i=u.owner,f,r;u.enabled?(f=t(n.element),f.css({visibility:"visible",display:""}),n._tab.addClass("ajax__tab_active"),n.populate(),n._header.focus()):n._active&&(r=i.getNearestTab(!1),!r||i.set_activeTab(r));i.show()},_deactivate:function(){var n=this,i=t(n.element);i.css({visibility:"hidden",display:"none"});n._tab.removeClass("ajax__tab_active")},_makeEnabled:function(n){var t=this,r=t.options.owner,i;n?(t._addHandlersOnEnabled(),t._header.removeClass("ajax__tab_disabled")):(t._removeHandlersOnEnabled(),t._active&&(i=r.getNearestTab(!1),!i||r.set_activeTab(i)),t._deactivate(),t._header.addClass("ajax__tab_disabled"))},_addHandlersOnEnabled:function(){var n=this;n._header.on("click",function(t){n._headerOnClick.call(n,t)}).on("mouseover",function(t){n._headerOnMouseOver.call(n,t)}).on("mouseout",function(t){n._headerOnMouseOut.call(n,t)}).on("keydown",function(t){n._headerOnKeyDown.call(n,t)})},_removeHandlersOnEnabled:function(){this._header.off("click").off("mouseover").off("mouseout").off("keydown").on("click",function(n){n.preventDefault()})},_headerOnClick:function(n){n.preventDefault();this.options.owner.set_activeTab(this);this.raiseClick(this);this._header.focus()},_headerOnMouseOver:function(){this._tab.addClass("ajax__tab_hover")},_headerOnMouseOut:function(){this._tab.removeClass("ajax__tab_hover")},_headerOnKeyDown:function(n){var s=this,i="which"in n?n.which:n.keyCode,t=s.options.owner,r=t.options.useVerticalStripPlacement,u,f,e,o;i=="39"&&!r||i=="40"&&r?(n.preventDefault(),u=t.getNextTab(!1),u&&t.set_activeTab(u)):i=="37"&&!r||i=="38"&&r?(n.preventDefault(),f=t.getPreviousTab(!1),f&&t.set_activeTab(f)):i=="35"?(n.preventDefault(),e=t.getLastTab(!1),e&&t.set_activeTab(e)):i=="36"&&(n.preventDefault(),o=t.getFirstTab(!1),o&&t.set_activeTab(o))},populate:function(n){var t=this,i=t.options;!t._dynamicPopulateBehavior&&i.dynamicServiceMethod&&(t._dynamicPopulateBehavior=$act.common.activateWidget("dynamicPopulateExtender",t.element,{id:t.element.attr("id")+"_DynamicPopulateBehavior",contextKey:i.dynamicContextKey,serviceMethod:i.dynamicServiceMethod,servicePath:i.dynamicServicePath}),t._dynamicPopulateBehavior.add_populating(function(){t.raisePopulating(this)}),t._dynamicPopulateBehavior.add_populated(function(){t.raisePopulated(this)}));t._dynamicPopulateBehavior&&t._dynamicPopulateBehavior.populate(n?n:i.dynamicContextKey)}},!0)})(window,actJQuery);